(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2693f300"],{"17c2":function(t,a,e){"use strict";var r=e("7398"),o=e.n(r);o.a},7398:function(t,a,e){},e4bb:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"history"}},[e("h1",[t._v("Ver Historial")]),e("br"),t.loading||t.data?t._e():e("div",{staticClass:"container"},[t.data||t.loading?t._e():e("div",{staticClass:"form-group w-50 center form-container p-2"},[e("h2",[t._v("Buscar en el historial")]),e("div",{staticClass:"m-3 h-25"},[e("label",{staticClass:"form-label float-left",attrs:{for:"month"}},[t._v("Mes")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"form-control float-left",class:{"is-invalid":!t.wholeYear&&(t.month<=0||t.month>12)},attrs:{type:"number",min:"1",max:"12",step:"1",disabled:t.wholeYear,id:"month"},domProps:{value:t.month},on:{input:function(a){a.target.composing||(t.month=a.target.value)}}})]),e("div",{staticClass:"m-3 h-25"},[e("label",{staticClass:"form-label float-left",attrs:{for:"year"}},[t._v("Año")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"form-control float-left",class:{"is-invalid":t.year<1900||t.year>2100},attrs:{type:"number",min:"1900",max:"2100",step:"1",id:"year"},domProps:{value:t.year},on:{input:function(a){a.target.composing||(t.year=a.target.value)}}})]),e("div",{staticClass:"row pt-3"},[e("div",{staticClass:"form-inline m-3 col-sm-5"},[e("div",{staticClass:"form-check mb-2 mr-sm-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.wholeYear,expression:"wholeYear"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineFormCheck"},domProps:{checked:Array.isArray(t.wholeYear)?t._i(t.wholeYear,null)>-1:t.wholeYear},on:{change:function(a){var e=t.wholeYear,r=a.target,o=!!r.checked;if(Array.isArray(e)){var s=null,n=t._i(e,s);r.checked?n<0&&(t.wholeYear=e.concat([s])):n>-1&&(t.wholeYear=e.slice(0,n).concat(e.slice(n+1)))}else t.wholeYear=o}}}),e("label",{staticClass:"form-check-label",attrs:{for:"inlineFormCheck"}},[t._v(" Todo el año ")])])]),e("div",{staticClass:"col-sm-6"},[e("button",{staticClass:"btn btn-primary float-right mb-2 mt-2",attrs:{disabled:t.year<1900||t.year>2100||!t.wholeYear&&(t.month<=0||t.month>12)},on:{click:function(a){return t.sendForm()}}},[t._v("Buscar")])])])])]),t.loading?e("div",[t.loading?e("Loader"):t._e()],1):t._e(),e("div",{staticClass:"container",class:{"d-none":!t.data},attrs:{id:"dataTable"}},[e("canvas",{attrs:{id:"historyChart",width:"100",height:"100"}}),e("br"),e("p",[e("strong",[t._v("Total en el año:")]),t._v(" $"+t._s(this.yearTotal))]),e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.resetForm()}}},[t._v("Volver atrás")])]),t.error?e("p",{staticClass:"alert alert-danger w-25 mt-5 center"},[t._v(t._s(this.error))]):t._e()])},o=[],s=(e("0d03"),e("d3b7"),e("25f0"),e("4b68")),n=e.n(s),i=e("555f"),l=e("7297"),c={name:"History",components:{Loader:i["a"]},methods:{sendForm:function(){var t=this;this.error=null;var a={year:this.year},e="getYearData";this.wholeYear||(a.month=this.month,e="getMonthData");var r=JSON.stringify(a),o={method:"POST",headers:{"Content-Type":"application/json"},body:r};this.data=null,this.loading=!0,fetch(l["default"].toString()+e,o).then((function(t){if(t.ok)return t.json();throw 404===t.status?Error("No se encontró datos para este año."):Error(t.statusText)})).then((function(a){t.setupChart(a)})).catch((function(a){t.error=a.message,console.log(a.message)})).finally((function(){t.loading=!1}))},setupChart:function(t){this.data=t;var a=[],e=[];this.yearTotal=t.totalValue,this.wholeYear?(a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],e=[{label:"Gasto Mensual",data:this.data.chartData,borderWidth:1,borderColor:"rgba(255,0,0,0.9)",lineTension:0,fill:!1}]):(a=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],e=[{label:"Gasto Diario",lineTension:0,spanGaps:!0,data:this.data.chartData,borderWidth:1,showLine:!0,borderColor:"rgba(255,0,0,0.9)",fill:!0,backgroundColor:"rgba(255,0,0,0.3)"}]);var r=document.getElementById("historyChart");new n.a(r,{type:"line",data:{labels:a,datasets:e},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},responsive:!0,maintainAspectRatio:!1}})},resetForm:function(){this.data=null,this.error=null,this.yearTotal=null}},data:function(){return{data:null,year:(new Date).getFullYear(),month:(new Date).getMonth()+1,wholeYear:!1,loading:!1,error:null,yearTotal:0}}},d=c,h=(e("17c2"),e("2877")),m=Object(h["a"])(d,r,o,!1,null,"064d9360",null);a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2693f300.919edd44.js.map