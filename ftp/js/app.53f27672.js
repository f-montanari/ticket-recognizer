(function(t){function e(e){for(var a,r,s=e[0],c=e[1],u=e[2],l=0,m=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},o={app:0},i=[];function s(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"cd5a9acd","chunk-5a80bef2":"ccff2236","chunk-12e6b8ab":"e83bce29","chunk-4a1cf3b8":"eea5cc06","chunk-5050a647":"2e6e8887"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-12e6b8ab":1,"chunk-4a1cf3b8":1,"chunk-5050a647":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-5a80bef2":"31d6cfe0","chunk-12e6b8ab":"087c3089","chunk-4a1cf3b8":"014f6233","chunk-5050a647":"42275f5a"}[t]+".css",o=c.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return e()}var m=document.getElementsByTagName("style");for(s=0;s<m.length;s++){u=m[s],l=u.getAttribute("data-href");if(l===a||l===o)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var m=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;m.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",m.name="ChunkLoadError",m.type=a,m.request=r,n[1](m)}o[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var m=0;m<u.length;m++)e(u[m]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0291":function(t,e,n){"use strict";var a=n("136c"),r=n.n(a);r.a},"034f":function(t,e,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"136c":function(t,e,n){},2827:function(t,e,n){"use strict";var a=n("307b"),r=n.n(a);r.a},"307b":function(t,e,n){},"555f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner-border text-primary",attrs:{id:"Loader",role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Cargando...")])])}],o={name:"Loader"},i=o,s=n("2877"),c=Object(s["a"])(i,a,r,!1,null,null,null);e["a"]=c.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Añadir ticket")]),t._v(" | "),n("router-link",{attrs:{to:"/year"}},[t._v("Vista Anual")]),t._v(" | "),n("router-link",{attrs:{to:"/month"}},[t._v("Vista Mensual")]),t._v(" | "),n("router-link",{attrs:{to:"/history"}},[t._v("Ver Historial")]),t._v(" | "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),n("router-view")],1)},o=[],i=(n("034f"),n("2877")),s={},c=Object(i["a"])(s,r,o,!1,null,null,null),u=c.exports,l=(n("4989"),n("ab8b"),n("d3b7"),n("8c4f")),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("h1",[t._v("Reconocedor de Tickets")]),n("div",{staticClass:"container mt-4",class:{"d-none":!t.itemData},attrs:{id:"dataTable"}},[n("DataTable",{attrs:{itemDataset:t.itemData,categories:t.categories},on:{eraseItem:function(e){return t.eraseItem(e)}}}),n("br"),n("div",{staticClass:"input-group w-25 total"},[t._m(0),t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.totalValue,expression:"totalValue"}],staticClass:"form-control",attrs:{type:"text",name:"txtTotal",id:"txtTotal"},domProps:{value:t.totalValue},on:{input:function(e){e.target.composing||(t.totalValue=e.target.value)}}})]),n("button",{staticClass:"btn btn-success",on:{click:t.sendCorrectedData}},[t._v("Confirmar")]),n("hr",{staticClass:"mb-4"})],1),n("div",{staticClass:"container",attrs:{id:"dataUploader"}},[t.loading?t._e():n("InputImage",{on:{"send-form":t.sendForm}}),t.loading?n("Loader"):t._e(),n("br")],1),t.error?n("span",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),n("br"),t.message?n("span",{staticClass:"alert alert-info"},[t._v(t._s(t.message))]):t._e()])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"txtTotal"}},[n("strong",[t._v("Total:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend ml-1"},[n("div",{staticClass:"input-group-text"},[t._v("$")])])}],d=(n("4de4"),n("555f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("input",{staticClass:" d-none",attrs:{type:"file",accept:"image/*",name:"img",id:"fileinput"},on:{change:t.changeItemName}}),n("label",{staticClass:"btn btn-primary",attrs:{for:"fileinput"}},[n("i",{staticClass:"material-icons"},[t._v("backup")]),t._v(" "),n("span",[t._v(t._s(this.itemName))])]),n("br"),n("button",{staticClass:"btn btn-success",on:{click:function(e){t.$emit("send-form",t.getFormData())}}},[t._v("Enviar")])])},p=[],v=(n("b0c0"),{name:"InputImageForm",data:function(){return{itemName:"Seleccione un archivo..."}},methods:{getFormData:function(){var t=new FormData,e=document.getElementById("fileinput");return t.append("img",e.files[0]),t},changeItemName:function(){var t=document.getElementById("fileinput");this.itemName=t.files[0].name}}}),b=v,g=(n("2827"),Object(i["a"])(b,h,p,!1,null,"dcc392e2",null)),_=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[t._m(0),t._l(t.itemDataset,(function(e){return n("tbody",{key:e.id},[n("DataItem",{attrs:{itemData:e,categories:t.categories},on:{eraseItem:function(e){return t.$emit("eraseItem",e)}}})],1)}))],2)},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Nombre")]),n("th",{attrs:{scope:"col"}},[t._v("Categoría")]),n("th",{attrs:{scope:"col"}},[t._v("Acciones")])])])}],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.itemData.id))]),n("td",[t.hideItem||t.selected?t._e():n("span",{on:{mouseover:function(e){t.hideItem=!0}}},[t._v(t._s(t.itemData.name))]),t._v(" "),t.hideItem||t.selected?n("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.name,expression:"itemData.name"}],staticClass:"form-control",attrs:{id:"item",type:"text"},domProps:{value:t.itemData.name},on:{focus:function(e){t.selected=!0},blur:function(e){t.selected=!1},mouseout:function(e){t.hideItem=!1},input:function(e){e.target.composing||t.$set(t.itemData,"name",e.target.value)}}}):t._e()]),n("td",[n("Autocomplete",{attrs:{search:t.search,placeholder:"Seleccione una categoría","aria-label":"Seleccione una categoría","default-value":t.itemData.label},on:{submit:t.onSelect}})],1),n("td",[n("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.$emit("eraseItem",t.itemData)}}},[n("b",[t._v("X")])])])])},C=[],w=(n("2ca0"),n("95bf")),I={name:"DataItem",components:{Autocomplete:w["a"]},props:["itemData","categories"],data:function(){return{hideItem:!1,selected:!1}},methods:{search:function(t){return t.length<1?[]:this.categories.filter((function(e){return e.toLowerCase().startsWith(t.toLowerCase())}))},onSelect:function(t){t&&(this.itemData.label=t)}}},x=I,E=(n("0291"),Object(i["a"])(x,k,C,!1,null,"35f0cc1c",null)),j=E.exports,O={name:"DataTable",components:{DataItem:j},props:["itemDataset","categories"]},T=O,S=Object(i["a"])(T,y,D,!1,null,null,null),P=S.exports,$=n("7297"),N={name:"home",components:{Loader:d["a"],InputImage:_,DataTable:P},created:function(){var t=this,e=$["default"]+"getCategories";fetch(e).then((function(t){return t.json()})).then((function(e){t.categories=e})).catch((function(n){t.error=n.message+"\nApi end point: "+e}))},data:function(){return{loading:!1,error:null,message:null,itemData:null,totalValue:0,categories:null}},methods:{sendForm:function(t){var e=this;this.message=null,this.error=null,this.itemData=null,this.totalValue=0,this.loading=!0,fetch($["default"]+"upload",{method:"POST",body:t}).then((function(t){return t.json()})).then((function(t){console.log(t),e.itemData=t.items,e.totalValue=t.value})).catch((function(t){e.error=t.message})).finally((function(){e.loading=!1}))},sendCorrectedData:function(){var t=this;this.message=null,this.error=null;var e=JSON.stringify({correctionData:this.itemData,totalValue:this.totalValue}),n={method:"POST",headers:{"Content-Type":"application/json"},body:e};fetch($["default"]+"addNewTrainingData",n).then((function(t){return t.json()})).then((function(e){t.message=e.message,t.itemData=null})).catch((function(e){t.error=e.message}))},eraseItem:function(t){var e=this.itemData.filter((function(e){return e.id!=t.id}));this.itemData=e}}},A=N,V=(n("6661"),Object(i["a"])(A,m,f,!1,null,"d2a68a5c",null)),L=V.exports;a["a"].use(l["a"]);var F=[{path:"/",name:"home",component:L},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/year",name:"year",component:function(){return Promise.all([n.e("chunk-5a80bef2"),n.e("chunk-4a1cf3b8")]).then(n.bind(null,"46f6"))}},{path:"/month",name:"month",component:function(){return Promise.all([n.e("chunk-5a80bef2"),n.e("chunk-12e6b8ab")]).then(n.bind(null,"07d0"))}},{path:"/history",name:"history",component:function(){return Promise.all([n.e("chunk-5a80bef2"),n.e("chunk-5050a647")]).then(n.bind(null,"e4bb"))}}],B=new l["a"]({routes:F}),M=B;n("8b78");a["a"].config.productionTip=!1,new a["a"]({router:M,render:function(t){return t(u)}}).$mount("#app")},6661:function(t,e,n){"use strict";var a=n("c740"),r=n.n(a);r.a},7297:function(t,e,n){"use strict";n("0d03"),n("d3b7"),n("25f0"),(window.location.origin+"/").toString()},"85ec":function(t,e,n){},c740:function(t,e,n){}});
//# sourceMappingURL=app.53f27672.js.map